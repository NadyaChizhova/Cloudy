(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;$.Define($$,{Website:{AddMovieControl:$.Class({get_Body:function(){return b.AddMovie();}}),Forms:{AddMovie:function(){var w,x,y,z,B,C,D,E,F,G,I,K,L,N,Q,Y,Z,_2;w=(x=(y=b.MovieTitleForm(),(z=function(A){return e.WithSubmitButton(A);},z(y))),(B=(C=(D=f.get_Default(),(E=(F=(G=function(H){return{$:0,$0:H};},G("Please enter movie title.")),(I=function(J){return{$:1,$0:J};},I(F))),$.New(f,{Header:(K=(L=function(M){return{$:0,$0:M};},L("Type Movie title to add")),(N=function(O){return{$:1,$0:O};},N(K))),Padding:D.Padding,Description:E,BackgroundColor:D.BackgroundColor,BorderColor:D.BorderColor,CssClass:D.CssClass,Style:D.Style}))),function(P){return e.WithCustomFormContainer(C,P);}),B(x)));Q=function(R){return function(){var T,U,V,X;T=g.Call("Website:1",[R]);T;U=h.ofArray([j.P(h.ofArray([(V=function(W){return j.Text(W);},V("Title is succesfully added"))]))]);X=j.Tags();return X.NewTag("fieldset",U);};};Y=(Z=k.Do(),Z.Delay(function(){return Z.Bind(w,function(_1){return Z.ReturnFrom(k.OfElement(Q(_1)));});}));_2=function(_3){return k.Flowlet(_3);};return _2(Y);},Input:function(_4,_5){var _6,_7,_8,_9,ba,bc;_6=(_7=(_8=l.Input(""),(_9=function(_){return m.Validator().IsNotEmpty(_5,_);},_9(_8))),(ba=function(bb){return e.WithValidationIcon(bb);},ba(_7)));bc=function(bd){return e.WithTextLabel(_4,bd);};return bc(_6);},InputInt:function(bd,be){var bf,bg,bh,bi,bj,bk,bm,bo,bp;bf=(bg=(bh=(bi=l.Input(""),(bj=m.Validator().IsInt(be),bj(bi))),(bk=function(bl){return e.WithValidationIcon(bl);},bk(bh))),(bm=function(bn){return e.WithTextLabel(bd,bn);},bm(bg)));bo=(bp=function(bq){return bq<<0;},function(br){return k.Map(bp,br);});return bo(bf);},LoginForm:function(bs){var bt,bu,bv,bw,bx,bz,bB,bD,bE,bF,bG,bH,bJ,bL,bN,bO,bR,bS,b5;bt=(bu=(bv=(bw=l.Input(""),(bx=function(by){return m.Validator().IsNotEmpty("Enter Username",by);},bx(bw))),(bz=function(bA){return e.WithValidationIcon(bA);},bz(bv))),(bB=function(bC){return e.WithTextLabel("Username",bC);},bB(bu)));bD=(bE=(bF=(bG=l.Password(""),(bH=function(bI){return m.Validator().IsNotEmpty("Enter Password",bI);},bH(bG))),(bJ=function(bK){return e.WithValidationIcon(bK);},bJ(bF))),(bL=function(bM){return e.WithTextLabel("Password",bM);},bL(bE)));bN=m.$(m.$((bO=function(bP){return function(bQ){return{Name:bP,Password:bQ};};},k.Return(bO)),bt),bD);bR=(bS=k.Do(),bS.Delay(function(){var bU,bV,bW,bX,bY;return bS.Bind((bU=(bV=(bW=n.get_Default(),$.New(n,{Label:{$:1,$0:"Login"},Style:bW.Style,Class:bW.Class})),(bX=(bY=n.get_Default(),$.New(n,{Label:{$:1,$0:"Reset"},Style:bY.Style,Class:bY.Class})),function(bZ){return e.WithCustomSubmitAndResetButtons(bV,bX,bZ);})),bU(bN)),function(b0){var b1,b2;return bS.ReturnFrom((b1=g.Async("Website:0",[b0]),(b2=function(b3){var b4;if(b3){b4=o;b4.location=bs;bs;return k.Return(null);}else{return b.WarningPanel("Login failed");}},b.WithLoadingPane(b1,b2))));});}));b5=function(b6){return e.WithFormContainer(b6);};return b5(bR);},MovieTitleForm:function(){var b7;return m.$((b7=function(b8){return b8;},k.Return(b7)),b.Input("Title","Please enter a title"));},WarningPanel:function(b9){var b_;b_=k.Do();return b_.Delay(function(){var ca;return b_.Bind((ca=function(){return p.add(j.Div(h.ofArray([j.Attr().Class("warningPanel")])),h.ofArray([j.Text(b9)]));},k.OfElement(ca)),function(){return b_.ReturnFrom(k.Never());});});},WithLoadingPane:function(cd,ce){var cf,cg;cf=(cg=function(){var ci,cj,ck,cl,cq;ci=j.Div(h.ofArray([j.Attr().Class("loadingPane")]));cj=r.New();ck=(cl=function(){var cn;cn=function(co){var cp;cp=$.New(u,{$:0,$0:co});cj.event.Trigger(cp);return v.Return(null);};return v.Bind(cd,cn);},v.Delay(cl));cq=function(cr){var cs;cs={$:0};return v.Start(cr);};cq(ck);return[ci,function(ct){ct;},cj.event];},k.BuildFormlet(cg));return k.Replace(cf,ce);}},LoginControl:$.Class({get_Body:function(){return b.LoginForm(this.redirectUrl);}})}});$.OnInit(function(){a=$.Safe($$.Website);b=$.Safe(a.Forms);c=$.Safe($$.IntelliFactory.WebSharper);d=$.Safe(c.Formlet);e=$.Safe(d.Enhance);f=$.Safe(e.FormContainerConfiguration);g=$.Safe(c.Remoting);h=$.Safe(c.List);i=$.Safe(c.Html);j=$.Safe(i.Default);k=$.Safe(d.Formlet);l=$.Safe(d.Controls);m=$.Safe(d.Data);n=$.Safe(e.FormButtonConfiguration);o=$.Safe($$.window);p=$.Safe(i.Operators);q=$.Safe(c.Control);r=$.Safe(q["FSharpEvent`1"]);s=$.Safe($$.IntelliFactory.Formlet);t=$.Safe(s.Base);u=$.Safe(t["Result`1"]);return v=$.Safe(c.Concurrency);});$.OnLoad(function(){});}());
